[mysqld]
# MySQL 配置文件
# 用于优化查询性能和临时文件管理

# ========== 临时文件配置 ==========
# 将临时目录指向有更多空间的位置（如果 /mnt/PushDownloads 可用）
# 注意：如果挂载点不存在，MySQL 会回退到默认 /tmp
# tmpdir = /mnt/PushDownloads/mysql-tmp

# 临时表大小限制（超过此大小会使用磁盘临时表）
tmp_table_size = 64M
max_heap_table_size = 64M

# ========== 查询优化 ==========
# 排序缓冲区大小（用于 ORDER BY 操作）
sort_buffer_size = 2M

# 读取缓冲区大小
read_buffer_size = 2M
read_rnd_buffer_size = 4M

# 连接缓冲区大小
join_buffer_size = 2M

# ========== 性能优化 ==========
# 查询缓存（MySQL 8.0 已移除，但保留配置以防版本差异）
# query_cache_type = 0
# query_cache_size = 0

# InnoDB 配置
innodb_buffer_pool_size = 256M
innodb_log_file_size = 64M
innodb_flush_log_at_trx_commit = 2
innodb_flush_method = O_DIRECT

# ========== 连接配置 ==========
max_connections = 100
max_connect_errors = 10000

# ========== 超时配置 ==========
# 查询超时（秒）
max_execution_time = 300
wait_timeout = 600
interactive_timeout = 600

# ========== 字符集配置 ==========
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

[mysql]
default-character-set = utf8mb4

[client]
default-character-set = utf8mb4

